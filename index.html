<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Form</title>


    <!-- Stylesheet -->
    <link rel="stylesheet" href="./colors.css">
    <link rel="stylesheet" href="./style/main.css">
    <link rel="stylesheet" href="./style/scrollBar.css">
    <link rel="stylesheet" href="./style/radio.css">
    <link rel="stylesheet" href="./style/imageCheckBox.css">
    <link rel="stylesheet" href="./style/colorInput.css">

    
    <!-- Icones Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>

</head>


<body>
    <header>
        <a href="">
            <object class="logo" data="./assets/svg/logo.svg"></object>
        </a>
        <h1>Formulário de Personalização das Agendas e Planners</h1>
    </header>

    <div class="mainContainer">
        <h2 class="title">
            Formulário Preliminar de Personalização
        </h2>
        <p>
            Texto exemplo descrição form, lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus non nulla et ligula scelerisque aliquam sit amet vel risus. Donec ex orci, lacinia in libero a, condimentum mollis nibh.
        </p>
        <br>
    </div>
    

    <!-- Endereco -->
    <div class="mainContainer">
        <h2 class="title">
            Endereço e Contato
        </h2>
        <p>
            Texto exemplo Endenreço e Contato.
        </p>
        
        <br><hr>

        <!-- onsubmit="return ((e)=>{console.log(e) ; e.preventDefault()})(event)" -->
        <form class="formSection" action="/teste">
            <div class="inputDiv">
                <h3>Suas Informações</h3><br>

                <sup class="mandatory"></sup> <br>
                <span class="title">Informe seu nome completo</span>
                <br>
                <input id="nome" class="simpleInput" type="text" placeholder="Sua resposta" required>
            </div>
            
            <hr>

            <div class="inputDiv">
                <sup class="mandatory"></sup> <br>
                <span class="title">Informe seu e-mail</span>
                <br>
                <input id="email" class="simpleInput" type="email" placeholder="meu.email@exemplo.com" required>
            </div>
            
            <hr>

            <div class="inputDiv">
            <sup class="mandatory"></sup> <br>
                <span class="title">Informe seu número de telefone
                <br>
                <i>(o mesmo utilizado no contato do whatsapp)</i>
                <br>

                
                <label for="numeroCelular" style="position: relative;">
                    <input required id="numeroCelular" type="tel" maxlength="11" class="hiddenNotIgnore" placeholder="+55 (00) 90000-0000">
                    <p id="numeroCelularOutput" class="simpleInput empty">+55 (00) 90000-0000</p>
                </label>

                <br><br>      
        
                <label class="checkboxForText" for="ignoreTextCorrection">
                    <input id="ignoreTextCorrection" class="simpleCheckbox" type="checkbox">
                    <span>Ignorar auto-correção</span>
                </label>
            </div>
            
            <hr>

            <div class="inputDiv">
                <h3>Endereço</h3><br>

                <sup class="mandatory"></sup> <br>
                <span class="title">Informe seu endereço completo
                <br>
                <i>(Contendo as seguintes informações: Nome do destinatário, Rua, Número, Bairro, Complemento, Cidade, Estado, CEP)</i> 
                
                <br>
                <textarea id="endereco" class="simpleInput largeInput" type="text" placeholder="Sua resposta" required></textarea> 
            </div>
            
            <input id="teste" type="submit" value="Enviar">
        </form>
    </div>
    

    <!-- Informações Adicionais -->
    <div class="mainContainer">
        <h2 class="title">
            Informações Adicionais
        </h2>
        <p>
            Texto exemplo Informações Adicionais.
        </p>
        
        <br><hr>

        <!-- onsubmit="return ((e)=>{console.log(e) ; e.preventDefault()})(event)" -->
        <form class="formSection" action="/teste">
            <div class="inputDiv">
                <h3>Sua Identidade Visual</h3><br>

                <sup class="mandatory"></sup> <br>
                <span class="title">Você possui Logomarca?</span>
                <br>
                
                <div id="temLogo" class="radio">
                    <label class="radioContainer"><span class="name">Sim</span>
                        <input type="radio" value="Sim" name="temLogo" required>
                        <span class="checkmark"></span>
                    </label>

                    <label class="radioContainer"><span class="name">Não</span>
                        <input type="radio" value="Não" name="temLogo">
                        <span class="checkmark"></span>
                    </label>
                </div>
            </div>

            

            <div id="enviarLogo" class="inputDiv ignore">

                <hr>
                <br><br>
                <sup class="mandatory"></sup> <br>
                <span class="title">Envie todos os seus arquivos de identidade visual/logomarca</span>
                <br>
                <i>(para obter uma melhor qualidade de imagem na capa, solicitamos envio da sua logo em formato PDF ou PNG)</i>
                
                <textarea id="endereco" class="simpleInput largeInput" type="text" placeholder="EM DESENVOLVIMENTO!" required></textarea> 
            </div>
            
            <input id="teste" type="submit" value="Enviar">
        </form>

    </div>


    <!-- Capa -->
    <div class="mainContainer">
        <h2 class="title">
            Informações da Capa
        </h2>
        <p>
            Texto exemplo Informações Capa.
        </p>
        
        <br><hr>

        
        <form class="formSection" action="/teste">
               
            <!-- Modelo da capa -->
            <div class="inputDiv">
                <h3>Modelo de Capa</h3><br>

                <span class="title">Dê uma olhada no nosso catálogo de capas, clique no link abaixo para abrir/fechar o catálogo aqui mesmo: <br>
                </span>
                <a id="openIframeCatalogo" class="link noOpen" href="https://catalogo.inovarpersonalizacao.com.br/">http://catalogo.inovarpersonalizacao.com.br/</a> <br>
                
                <br>

                <iframe id="iframeCatalogo" class="hidden ignore" src="https://catalogo.inovarpersonalizacao.com.br/" frameborder="0"></iframe>
                
                Caso queira algum modelo, informe abaixo o nome:</span>

                <br>

                <input id="modeloCapa" class="simpleInput iframeOpen" type="text" placeholder="Sua resposta">
                
                <br><br>
        
                <label class="checkboxForText" for="noPreModel">
                    <input id="noPreModel" class="simpleCheckbox" type="checkbox">
                    <span>Não quero usar nenhum dos modelos</span>
                </label>
                

                <div id="inputColorsCapa" class="inputDiv ignore">
                    <hr>

                    <br><br>
                    <h3>Cores Para a Capa</h3><br>

                    <span class="title">Caso queira, informe até 3 cores que deseja usar:</span>
                    <br><br>
                    <i>(toque no espaço acima dos textos para escolher uma cor)</i>
                    <br><br><br>

                    <div class="inputColorContainer">
                        <div class="inputColor">
                            <input type="color" id="capaColor-1" value="#FFFFFF">
                            <label for="capaColor-1">
                                <div class="info">
                                    <h2>Cor:</h2>
                                    <h1 class="name">Insira</h1>
                                    <hr>
                                    <h2 class="outputColor"></h2>
                                </div>
                            </label>
                        </div>

                        <div class="inputColor">
                            <input type="color" id="capaColor-2" value="#FFFFFF">
                            <label for="capaColor-2">
                                <div class="info">
                                    <h2>Cor:</h2>
                                    <h1 class="name">Insira</h1>
                                    <hr>
                                    <h2 class="outputColor"></h2>
                                </div>
                            </label>
                        </div>

                        <div class="inputColor">
                            <input type="color" id="capaColor-3" value="#FFFFFF">
                            <label for="capaColor-3">
                                <div class="info">
                                    <h2>Cor:</h2>
                                    <h1 class="name">Insira</h1>
                                    <hr>
                                    <h2 class="outputColor"></h2>
                                </div>
                            </label>
                        </div>

                    </div>
                </div>

            </div>
    
            <hr>
            
            <!-- Destaque da capa -->
            <div class="inputDiv">
                <h3>Escolha o Destaque</h3><br>

                <sup class="mandatory"></sup> <br>
                <span class="title">O que você quer como destaque da capa?:</span>
                <br>
                
                <div id="usarLogo" class="radio">
                    <label class="radioContainer"><span class="name">Quero o meu nome <i>(descreva como quer escrito na proxima pergunta)</i></span>
                        <input type="radio" name="usarLogo" value="Quero o meu nome" required>
                        <span class="checkmark"></span>
                    </label>

                    <label id="logoCorOriginial" class="radioContainer"><span class="name">Quero minha logomarca nas cores originais</span>
                        <input type="radio" name="usarLogo" value="Quero minha logomarca nas cores originais">
                        <span class="checkmark"></span>
                    </label>
    
                    <label id="logoCorModelo" class="radioContainer"><span class="name">Quero minha logomarca no mesmo estilo do modelo que escolhi</span>
                        <input type="radio" name="usarLogo" value="Quero minha logomarca no mesmo estilo do modelo que escolhi">
                        <span class="checkmark"></span>
                    </label>
    
                    <label class="radioContainer"><span class="name">Quero outra coisa na capa <i>(descreva na proxima pergunta)</i></span>
                        <input type="radio" name="usarLogo" value="Quero outra coisa na capa">
                        <span class="checkmark"></span>
                    </label>
                </div>
            </div>

            <hr>
            
            <!-- Apresentação da Capa -->
            <div class="inputDiv">
                <h3>Apresentação da Capa</h3><br>
                <span class="title">Aqui um exemplo de como a capa vai ficar: </span>
                <br>

                <div class="capaPresentation">
                    <img src="./assets/Images/capaApresentacao.jpg">
                </div>

                <br>
                <sup class="mandatory"></sup> <br>
                <span class="title">Descreva detalhadamente, como gostaria de personalizar a capa e a contracapa: </span>
                <textarea id="detalhesCapaContraCapa" class="simpleInput largeInput" type="text" placeholder="Sua resposta" required></textarea>
            </div>

            <hr>

            <!-- Acabamento -->
            <div class="inputDiv">
                <h3>Acabamentos</h3><br>

                <sup class="mandatory"></sup> <br>
                <span class="title">Informe a laminação da capa e contracapa: </span><br><br>
                <span>As opções com <span class="favorite"></span> são as favoritas dos nossos clientes!</span>
                
                <div id="acabamentos" class="imageCheckBoxWrapper selectOnlyOne"> </div>
            </div>



            <input id="teste" type="submit" value="Enviar">
        </form> 
    </div>


    <!-- Adicionais -->
    <div class="mainContainer">
        <h2 class="title">
            Adicionais
        </h2>
        <p>
            Texto exemplo Adicionais.
        </p>
        
        <br><hr>

        
        <form class="formSection" action="/teste">

            <div class="inputDiv">
                <h3>Página Destaque</h3><br>
                <span class="title">A primeira página pode ser especial com o Bolso Canguru (um bolsinho para guardar documentos e outras coisas) ou a Folha de Fotos (Uma página com algumas imagens da sua preferencia)
                    <br><br>
                    Escolha uma das opções abaixo:
                </span>
                
                <div id="bolso" class="imageCheckBoxWrapper selectOnlyOne additionals"></div>
            </div>


            <div id="enviarFotos" class="inputDiv ignore">

                <hr>
                <br><br>
                <sup class="mandatory"></sup> <br>
                <span class="title">Envie duas fotos para a folha destaque:</span>
                
                <textarea id="endereco" class="simpleInput largeInput" type="text" placeholder="EM DESENVOLVIMENTO!" required></textarea> 
            </div>
            

            <hr>

            <div class="inputDiv">
                <h3>Elásticos</h3><br>
                <span class="title">Essas são as opções de Elásticos que temos:</span> <br><br>
                <span>As opções com <span class="favorite"></span> são as favoritas dos nossos clientes!</span>

                
                <div id="elastico" class="imageCheckBoxWrapper selectOnlyOne additionals"></div>
            </div>


            <hr>

            <div class="inputDiv">
                <h3>Itens Adicionais</h3><br>
                <span class="title">Alguns itens Adicionais para dar mais vida ao seu pedido:</span> <br><br>
                <span>As opções com <span class="favorite"></span> são as favoritas dos nossos clientes!</span>

                
                <div id="adicionais" class="imageCheckBoxWrapper additionals"></div>
            </div>

            <input id="teste" type="submit" value="Enviar">
        </form> 
    </div>

</body>

<!-- functions -->
<script>
    var insertImageCheckboxValues = (selector, insertList) => {
        var insertEl = document.querySelector(selector);

        insertList.forEach((a, i) => {
            var isMandatory = insertEl.parentNode.querySelector(".mandatory");
            
            var favorite = a.favorite? " favorite": "";
            var firstSelected = (!i && isMandatory? " selected": "");

            var imageCheckBoxContainer = document.createElement("div");
                imageCheckBoxContainer.className = "imageCheckBoxContainer" + firstSelected + favorite;

                var id = insertEl.id + "-" + i;

                var input = document.createElement("input");
                    input.type = "checkbox";
                    input.id = id;
                    input.value = a.sendValue? a.sendValue: a.name;
                    input.checked = firstSelected != "";

                var label = document.createElement("label");
                    label.htmlFor = id;

                    var labelSelector = document.createElement("div");
                        labelSelector.className = "labelSelector";

                        var img = document.createElement("img");
                            img.src = a.img

                        var name = document.createElement("p");
                            name.className = "name";
                            name.innerHTML = '<span class="insertIcon"></span> ' + a.name;

                        var hr = document.createElement("hr");

                        var price = document.createElement("p");
                            price.className = "price";
                            price.innerHTML = "(" + a.price + ")";
                        
                    labelSelector.append(img, name, hr, price);
                label.append(labelSelector);
            imageCheckBoxContainer.append(input, label);

            insertEl.append(imageCheckBoxContainer);
        });
    }
</script>

<script src="./lists/acabamentos.js"></script>
<script src="./lists/paginaDestaque.js"></script>
<script src="./lists/elasticos.js"></script>
<script src="./lists/adicionais.js"></script>

<script src="./scripts/nameThatColor.js"></script>



<!-- hidden input -->
<script>
    var executeHiddenInput = (input, output, ignoreCheckMark) => {
        var doNumberPatern = () => {
            var output2;

            if(!ignoreCheckMark?.checked){
                if(input.value.length < 11){
                    var area = input.value.substr(0, 2);
                    var pre = input.value.substr(2, 4);
                    var tel = input.value.substr(6, 4);
                    if (area.length < 2) {
                        output2 = "+55 (" + area;
                    } else if (area.length == 2 && pre.length < 4) {
                        output2 = "+55 (" + area + ") " + "" + pre;
                    } else if (area.length == 2 && pre.length == 4) {
                        output2 = "+55 (" + area + ") " + "" + pre + "-"+tel;
                    }

                    output.innerHTML = output2;

                } else if(input.value.length >= 11){
                    var area = input.value.substr(0, 2);
                    var pre = input.value.substr(2, 5);
                    var tel = input.value.substr(7, 4);
                    if (area.length < 2) {
                        output2 = "+55 (" + area;
                    } else if (area.length == 2 && pre.length < 5) {
                        output2 = "+55 (" + area + ") " + "" + pre;
                    } else if (area.length == 2 && pre.length == 5) {
                        output2 = "+55 (" + area + ") " + "" + pre + "-"+tel;
                    }

                    output.innerHTML = output2;
                }
                
                input.value = input.value.slice(0, 11);
                
            } else {
                output.innerHTML = input.value;
            }


            if(input.value) {
                output.classList.remove("empty");
            } else {
                output.classList.add("empty");
                output.innerHTML = input.placeholder;
            }
        }


        input.addEventListener("focus", () => {
            output.classList.add("inputSelected");
        });

        input.addEventListener("blur", () => {
            output.classList.remove("inputSelected");
        });
        

        ignoreCheckMark?.addEventListener("input", () => {
            if(ignoreCheckMark?.checked){
                input.maxLength = 30;
            } else {
                input.maxLength = 11;
            }

            doNumberPatern();
            
            input.focus();
        });


        var lastPhoneValue;
        input.addEventListener('input', function(evt){

            input.value = input.value.replace(/[^0-9]/g, '');

            doNumberPatern();
        });
    }

    executeHiddenInput(document.querySelector("#numeroCelular"),
                       document.querySelector("#numeroCelularOutput"),
                       document.querySelector("#ignoreTextCorrection"))
</script>


<!-- especifc stuff -->
<script>
    // Bolso hide send file input
    Array.from(document.querySelectorAll("#bolso input")).forEach(e => {
        e.addEventListener("click", () => {
            var enviarFotos = document.querySelector("#enviarFotos");
            var input = document.querySelector("#enviarFotos .simpleInput");

            if(["Folha Plástica de Fotos", "Os Dois"].includes(e.value) && !e.parentNode.classList.contains("selected")){
                enviarFotos.classList.remove("ignore");
                input.required = true;

            } else {
                enviarFotos.classList.add("ignore");
                input.required = false;
            }
        })
    });

    // Logo hide send file input
    Array.from(document.querySelectorAll("#temLogo input")).forEach(e => {
        e.addEventListener("click", () => {
            var enviarLogoShow = [document.querySelector("#enviarLogo")];
            var enviarLogoHide = [document.querySelector("#logoCorOriginial"), document.querySelector("#logoCorModelo")];

            var input = document.querySelector("#enviarLogo .simpleInput");

            if(e.value == "Sim"){
                enviarLogoShow.forEach(el => el.classList.remove("ignore"));

                enviarLogoHide.forEach(el => {
                    el.classList.remove("ignore");
                });

                input.required = true;

            } else {
                enviarLogoShow.forEach(el => el.classList.add("ignore"));

                enviarLogoHide.forEach(el => {
                    el.classList.add("ignore");

                    el.querySelector("input").checked = false;
                });

                input.required = false;
            }
        })
    });

    // Catalogo smooth scroll
    document.querySelector("#openIframeCatalogo").addEventListener("click", (evt) => {
        evt.preventDefault();  
        
        var iframe = document.querySelector("#iframeCatalogo").classList;

        clearTimeout(window.hideIframeTimeout);
        
        if(iframe.contains("hidden")){
            iframe.remove("ignore");
            window.hideIframeTimeout = setTimeout(() => {
                iframe.remove("hidden");
            }, 100);


        } else {
            iframe.add("hidden");
            window.hideIframeTimeout = setTimeout(() => {
                iframe.add("ignore");
            }, 1000);
        }
    });
    
    // show color inputs
    document.querySelector("#noPreModel").addEventListener("input", () => {
        var input = document.querySelector("#noPreModel");

        var hide = document.querySelector("#modeloCapa");
        var show = document.querySelector("#inputColorsCapa");

        if(input.checked){
            hide.classList.add("ignore");
            hide.required = false;

            show.classList.remove("ignore");

        } else {
            hide.classList.remove("ignore");
            hide.required = true;

            show.classList.add("ignore");
        }
    })
</script>

<!-- setup -->
<script>

    // textbox autoadjust
    Array.from(document.querySelectorAll('.simpleInput.largeInput')).forEach(e => {
        e.addEventListener("input", (evt) => {
            var element = evt.target; 
            element.style.height = "5px";
            element.style.height = (element.scrollHeight)+"px";
        })
    })


    // check box add style
    Array.from(document.querySelectorAll(".imageCheckBoxWrapper input")).forEach(e => {
        e.addEventListener("input", () => {
            if(e.checked){
                e.parentNode.classList.add("selected");
                
            } else {
                e.parentNode.classList.remove("selected");
            }
        })
    })


    // select only one script
    Array.from(document.querySelectorAll(".selectOnlyOne")).forEach(c => {
        Array.from(document.querySelectorAll("#"+c.id+" label")).forEach(e => {

            e.addEventListener("click", (evt) => {
                var selected = e.htmlFor;

                var isMandatory = e.parentNode?.parentNode?.parentNode?.querySelector(".mandatory");

                if(isMandatory && e.parentNode.classList.contains("selected")){
                    evt.preventDefault();
                    return
                }
                
                Array.from(document.querySelectorAll("#"+e.parentNode.parentNode.id+" input")).forEach(i => {
                    if(i.id != selected){ 
                        i.checked = false;
                        i.parentNode.classList.remove("selected");
                    }
                    
                })
                
            })
            
        })
    });

    // show input colors values
    document.querySelectorAll(".inputColor").forEach(e => {
        var input = e.querySelector("input");
        var output = e.querySelector(".outputColor");
        var name = e.querySelector(".name");

        output.innerHTML = input.value;
        console.log(nameThatColor(input.value));
        name.innerHTML = nameThatColor(input.value).name;

        e.addEventListener("input", () => {
            output.innerHTML = input.value;
            name.innerHTML = nameThatColor(input.value).name;
        })
    });
</script>

<!-- gather info -->
<script>
    // gather info to object

    var gatherInfo = () => {
        document.querySelectorAll(".inputDiv").forEach(e => {

        var inputType;
        if(inputType = e.querySelector(".simpleInput")){

            console.log(inputType.value)
            
        } else if(inputType = e.querySelector(".radio input:checked")){


            console.log(inputType.value)
            
        } else if(inputType = e.querySelector(".imageCheckBoxWrapper")){

            console.log(inputType.querySelectorAll(".selected"))
            
        }

    })
    }
</script>
</html>